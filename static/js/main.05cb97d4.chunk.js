(this.webpackJsonpdecade_trends=this.webpackJsonpdecade_trends||[]).push([[0],{118:function(e,t,a){e.exports=a(197)},123:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),s=a.n(c),l=(a(123),a(74)),u=a(32),o=a(17),i=a(237),m=a(238),p=a(239),b=a(19),d=a.n(b),f=["facebook","amazon","apple","netflix","google"],h="/hn-past-decade",j={D:"Day",W:"Week",M:"Month",Q:"Quarter",Y:"Year"},E=a(230),v=a(231),O=a(233),w=a(232),g=a(228),x=Object(g.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},h1:{fontSize:"2rem"},panel:{padding:e.spacing(3)},main:{marginTop:e.spacing(3),height:"100%"},input:{width:"100%",minWidth:"120px"},plotContainer:{width:"100%",height:"100%",minHeight:"".concat(400,"px")},toolbar:{flexDirection:"row"}}})),y=function(){var e=x();return r.a.createElement(E.a,{position:"relative"},r.a.createElement(v.a,{className:e.toolbar},r.a.createElement(w.a,{className:e.h1,variant:"h1"},"HN Trends of the Past Decade"),r.a.createElement(O.a,{href:"https://github.com/nvbn/hn-past-decade"},"github")))},k=a(106),S=a.n(k),C=a(199),N=function(e){var t=e.tsKeywords,a=e.dates,c=x(),s=Object(n.useState)(0),l=Object(o.a)(s,2),u=l[0],i=l[1],m=Object(n.useState)(0),p=Object(o.a)(m,2),b=p[0],d=p[1],f=Object(n.useRef)(null),h=Object(n.useCallback)((function(){if(null!==f.current){var e=f.current.getBoundingClientRect(),t=document.documentElement.clientHeight-e.top-32;t<400&&(t=400),d(t),i(e.width)}}),[f]);return Object(n.useEffect)(h,[f]),Object(n.useLayoutEffect)((function(){return window.addEventListener("resize",h),function(){return window.removeEventListener("resize",h)}}),[h]),r.a.createElement(C.a,null,r.a.createElement("div",{className:c.plotContainer,ref:f},r.a.createElement(S.a,{data:Object.keys(t).map((function(e){return{type:"scatter",mode:"lines",name:e,x:a,y:t[e]}})),layout:{width:u,height:b,title:Object.keys(t).join(", ")}})))},R=a(236),M=a(235),D=a(234),K=a(240),L=a(107),z=function(e){return e.sort().join(",")},I=function(e){var t=e.initialResolution,a=e.initialSelected,c=e.onResolutionChange,s=e.onSelectedChange,l=e.rankedKeywords,u=e.presets,i=x(),m=Object(n.useState)(t),p=Object(o.a)(m,2),b=p[0],d=p[1],f=Object(n.useCallback)((function(e){var t=e.target.value;d(t),c(t)}),[c,d]),h=Object(n.useMemo)((function(){return new Map(Object.keys(u).map((function(e){return[z(u[e]),e]})))}),[u]),E=Object(n.useState)(a),v=Object(o.a)(E,2),O=v[0],w=v[1],g=Object(n.useState)(h.get(z(O))),y=Object(o.a)(g,2),k=y[0],S=y[1],N=Object(n.useCallback)((function(e){w(e),s(e),S(h.get(z(e)))}),[s,w,h]),I=Object(n.useCallback)((function(e){var t=e.target.value;w(u[t]),s(u[t]),S(t)}),[s,w,u]);return r.a.createElement(C.a,{className:i.panel},r.a.createElement("div",null,r.a.createElement(D.a,null,r.a.createElement(M.a,{id:"resolution-label"},"Resolution"),r.a.createElement(K.a,{labelId:"resolution-label",value:b,onChange:f,className:i.input},Object.keys(j).map((function(e){return r.a.createElement(R.a,{value:e,key:"item-".concat(e)},j[e])}))))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(D.a,{className:i.input},r.a.createElement(L.MultipleSelect,{label:"Keywords",options:l.map((function(e){var t=Object(o.a)(e,2),a=t[0];t[1];return a})),values:O,onChange:N}))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(D.a,null,r.a.createElement(M.a,{id:"preset-label"},"Preset"),r.a.createElement(K.a,{labelId:"preset-label",onChange:I,className:i.input,value:k||"",displayEmpty:!0},Object.keys(u).map((function(e){return r.a.createElement(R.a,{value:e,key:"preset-".concat(e)},e)}))))))},P=function(){var e=x(),t=Object(u.g)(),a=new URLSearchParams(t.search),c=a.get("res"),s=a.get("kws"),l=Object(u.f)().push,b=Object(n.useState)(),j=Object(o.a)(b,2),E=j[0],v=j[1];Object(n.useEffect)((function(){(function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(fetch("".concat(h,"/dataset/hn/keywords.json")));case 2:return e=t.sent,t.next=5,d.a.awrap(e.json());case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))})().then(v)}),[]);var O=Object(n.useState)(),w=Object(o.a)(O,2),g=w[0],k=w[1];Object(n.useEffect)((function(){(function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(fetch("".concat(h,"/dataset/hn/presets.json")));case 2:return e=t.sent,t.next=5,d.a.awrap(e.json());case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))})().then(k)}),[]);var S=Object(n.useState)(c||"M"),C=Object(o.a)(S,2),R=C[0],M=C[1],D=Object(n.useState)(s?s.split(","):f),K=Object(o.a)(D,2),L=K[0],z=K[1],P=Object(n.useState)(),W=Object(o.a)(P,2),H=W[0],U=W[1];Object(n.useEffect)((function(){(function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(fetch("".concat(h,"/dataset/hn/ts/").concat(e,"_dates.json")));case 2:return t=a.sent,a.next=5,d.a.awrap(t.json());case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))})(R).then(U)}),[R]),Object(n.useEffect)((function(){var e=new URLSearchParams;e.set("res",R),e.set("kws",L.join(",")),l("".concat(window.location.pathname,"?").concat(e.toString()))}),[l,R,L]);var _=Object(n.useState)(),B=Object(o.a)(_,2),J=B[0],Q=B[1];return Object(n.useEffect)((function(){Q(void 0),function(e,t){var a,n,r,c,s,l,u,o;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:a={},n=!0,r=!1,c=void 0,i.prev=4,s=t[Symbol.iterator]();case 6:if(n=(l=s.next()).done){i.next=17;break}return u=l.value,i.next=10,d.a.awrap(fetch("".concat(h,"/dataset/hn/ts/").concat(e,"/").concat(encodeURIComponent(u),".json")));case 10:return o=i.sent,i.next=13,d.a.awrap(o.json());case 13:a[u]=i.sent;case 14:n=!0,i.next=6;break;case 17:i.next=23;break;case 19:i.prev=19,i.t0=i.catch(4),r=!0,c=i.t0;case 23:i.prev=23,i.prev=24,n||null==s.return||s.return();case 26:if(i.prev=26,!r){i.next=29;break}throw c;case 29:return i.finish(26);case 30:return i.finish(23);case 31:return i.abrupt("return",a);case 32:case"end":return i.stop()}}),null,null,[[4,19,23,31],[24,,26,30]])}(R,L).then(Q)}),[R,L]),r.a.createElement("div",{className:e.root},r.a.createElement(y,null),r.a.createElement("main",{className:e.main},r.a.createElement(i.a,{maxWidth:"lg"},r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,md:3,xs:12},E&&g?r.a.createElement(I,{initialResolution:R,onResolutionChange:M,initialSelected:L,onSelectedChange:z,rankedKeywords:E,presets:g}):r.a.createElement(p.a,null)),r.a.createElement(m.a,{item:!0,md:9,xs:12},J&&H?r.a.createElement(N,{tsKeywords:J,dates:H}):r.a.createElement(p.a,null))))))},W=function(){return r.a.createElement(l.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{children:r.a.createElement(P,null)})))};s.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.05cb97d4.chunk.js.map